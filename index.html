<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Math X-O</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="matrix-bg"></div>

    <div id="setup-screen" class="screen">
        <div class="glass-container">
            <h1 class="main-title">إكس أو الحسابية</h1>
            
            <div class="instructions-trigger" onclick="toggleInstructions(true)">التعليمات</div>

            <div class="setup-form">
                <div class="input-group">
                    <input type="text" id="teamXName" placeholder="اسم الفريق X">
                    <input type="text" id="teamOName" placeholder="اسم الفريق O">
                </div>

                <div class="settings-group">
                    <div class="select-item">
                        <label>نوع العمليات:</label>
                        <select id="mathOperation">
                            <option value="random">عشوائي</option>
                            <option value="add">جمع (+)</option>
                            <option value="sub">طرح (-)</option>
                            <option value="mul">ضرب (×)</option>
                            <option value="div">قسمة (÷)</option>
                        </select>
                    </div>

                    <div class="select-item">
                        <label>المؤقت:</label>
                        <select id="timerOption">
                            <option value="0">بدون وقت</option>
                            <option value="5">5 ثوانٍ</option>
                            <option value="10" selected>10 ثوانٍ</option>
                            <option value="15">15 ثانية</option>
                        </select>
                    </div>
                </div>

                <button id="startGameButton" class="start-btn">ابدأ اللعب</button>
            </div>
        </div>
    </div>

    <div id="instructions-modal" class="modal hidden">
        <div class="modal-content">
            <h2>كيف تلعب؟</h2>
            <ul>
                <li>اختر مربعاً وحل العملية الحسابية لتضع علامتك.</li>
                <li>حركتك تحدد المربع الكبير التالي لخصمك.</li>
                <li>عند الخطأ أو انتهاء الوقت، يحصل الخصم على "لعب حر".</li>
            </ul>
            <button class="close-btn" onclick="toggleInstructions(false)">فهمت</button>
        </div>
    </div>

    <div id="game-screen" class="screen hidden">
        <div class="game-ui">
            <div id="teamX-card" class="team-panel x-side">
                <span id="nameX">الفريق X</span>
                <div class="score">النقاط: <span id="scoreX">0</span></div>
            </div>

            <div class="timer-wrapper">
                <div id="game-timer">--</div>
            </div>

            <div id="teamO-card" class="team-panel o-side">
                <span id="nameO">الفريق O</span>
                <div class="score">النقاط: <span id="scoreO">0</span></div>
            </div>
        </div>

        <div class="main-board-wrapper">
            <div id="meta-board"></div>
        </div>

        <div class="footer-controls">
            <button onclick="changeBackground()" class="icon-btn">تغيير الخلفية</button>
            <button onclick="toggleTheme()" class="icon-btn">تبديل المظهر</button>
        </div>
    </div>

    <div id="math-popup" class="popup hidden">
        <div class="popup-box">
            <div id="popup-timer-line"></div>
            <p>حل العملية:</p>
            <h2 id="math-q">7 × 8</h2>
            <div id="math-ans-display">_</div>
            <div id="success-tick" class="hidden">✔ إجابة صحيحة</div>
            
            <div class="keypad">
                <button onclick="pressKey(1)">1</button>
                <button onclick="pressKey(2)">2</button>
                <button onclick="pressKey(3)">3</button>
                <button onclick="pressKey(4)">4</button>
                <button onclick="pressKey(5)">5</button>
                <button onclick="pressKey(6)">6</button>
                <button onclick="pressKey(7)">7</button>
                <button onclick="pressKey(8)">8</button>
                <button onclick="pressKey(9)">9</button>
                <button onclick="clearKey()" class="c-btn">C</button>
                <button onclick="pressKey(0)">0</button>
                <button onclick="backspaceKey()">⌫</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
